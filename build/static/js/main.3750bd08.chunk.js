(this["webpackJsonpga-comments"]=this["webpackJsonpga-comments"]||[]).push([[0],{106:function(e,t,c){},111:function(e,t,c){},223:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c(2),r=c.n(s),a=c(94),i=c.n(a),l=(c(106),c(8)),o=(c(107),c(43)),d=c.n(o),j=(c(108),c(109),c(35)),u=c(22),b=c(4),h=(c(111),c(12)),O=c(16),m=c(18),x=c.n(m),f=c(36),v=c(9),p=c(10),g=c(19),N=["grid","grid-cols-3","gap-10"],w=function(e){var t=e.children,c=e.styles;return Object(n.jsx)("div",{className:Object(v.a)([N,c]),children:t})},y=function(e){var t=e.students;return Object(n.jsx)(w,{styles:["grid-cols-4"],children:Object(n.jsx)(p.c,{name:"students",children:function(e){var c=e.remove,s=e.push;return Object(n.jsxs)(r.a.Fragment,{children:[t.map((function(e,t){return e.isEditable&&!0===e.isEditable?Object(n.jsxs)(r.a.Fragment,{children:[Object(n.jsxs)("div",{className:Object(v.a)(["flex","flex-col"]),children:[Object(n.jsx)("label",{htmlFor:"students[".concat(t,"].firstName"),children:"First Name"}),Object(n.jsx)(p.b,{name:"students[".concat(t,"].firstName")}),Object(n.jsx)(p.a,{name:"students[".concat(t,"].firstName"),render:function(e){return Object(n.jsx)(z,{text:e})}})]}),Object(n.jsxs)("div",{className:Object(v.a)(["flex","flex-col"]),children:[Object(n.jsx)("label",{htmlFor:"students[".concat(t,"].lastName"),children:"Last Name"}),Object(n.jsx)(p.b,{name:"students[".concat(t,"].lastName")}),Object(n.jsx)(p.a,{name:"students[".concat(t,"].lastName"),render:function(e){return Object(n.jsx)(z,{text:e})}})]}),Object(n.jsxs)("div",{className:Object(v.a)(["flex","flex-col"]),children:[Object(n.jsx)("label",{htmlFor:"students[".concat(t,"].gender"),children:"Gender"}),Object(n.jsxs)(p.b,{as:"select",name:"students[".concat(t,"].gender"),children:[Object(n.jsx)("option",{value:"",children:"Select..."}),Object(n.jsx)("option",{value:"Male",children:"Male"}),Object(n.jsx)("option",{value:"Female",children:"Female"}),Object(n.jsx)("option",{value:"Other",children:"Other"})]}),Object(n.jsx)(p.a,{name:"students[".concat(t,"].gender"),render:function(e){return Object(n.jsx)(z,{text:e})}})]}),Object(n.jsx)(R,{remove:c,index:t})]}):Object(n.jsxs)(w,{children:[Object(n.jsx)("div",{children:e.firstName}),Object(n.jsx)("div",{children:e.lastName}),Object(n.jsx)("div",{children:e.gender}),Object(n.jsx)(R,{remove:c,index:t})]})})),Object(n.jsx)(Q,{push:s}),t.length>0&&Object(n.jsx)("div",{children:Object(n.jsx)("button",{type:"submit",children:"Submit"})})]})}})})},I=c.p+"static/media/remove_button.c88272c3.svg",C=function(){return Object(n.jsx)("img",{src:I,alt:"remove button",className:"cursor-pointer w-7"})},S=c(23),F=c.n(S),k="classes",L="students",A=function(){return F.a.firestore.Timestamp.now()},D=function(){return{modifiedAt:A()}},E=function(){return Object(O.a)(Object(O.a)({},{createdAt:A()}),D())},T=function(e,t){e.push(t)},P=function(e){!function(e,t,c){be.collection(e).doc(t).set(Object(O.a)({isActive:c},D()),{merge:!0})}(k,e,!1)},q=function(){return{firstName:"",lastName:"",gender:"",isEditable:!0}},M=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:q,c=[],n=0;n<e;n++)c.push(t());return c},R=function(e){var t=e.remove,c=e.index;return Object(n.jsx)("div",{onClick:function(e){t(c)},className:Object(v.a)(["flex","justify-center items-center"]),children:Object(n.jsx)("div",{children:Object(n.jsx)(C,{})})})},J=function(){var e=Object(f.a)(x.a.mark((function e(t){var c,n,s,r,a,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.students,n=t.className,s=t.teacherId,r=t.history,e.prev=1,e.next=4,be.collection(k).add(Object(O.a)({name:n,teacherId:s,isActive:!0},E()));case 4:return a=e.sent,e.prev=5,i=be.batch(),c.forEach((function(e){var t=be.collection(L).doc();i.set(t,Object(O.a)({firstName:e.firstName,lastName:e.lastName,gender:e.gender,classID:a.id,isActive:!0},E()))})),e.next=10,i.commit();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.error("Error inserting students",e.t0);case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(1),console.error("Error inserting class",e.t1);case 20:console.log("Insertion Successful!"),T(r,"/");case 22:case"end":return e.stop()}}),e,null,[[1,17],[5,12]])})));return function(t){return e.apply(this,arguments)}}(),z=function(e){var t=e.text;return Object(n.jsx)("i",{className:"text-red-700",children:t})},B=g.b().shape({firstName:g.c().min(2,"Too Short!").max(70,"Too Long!").required("Required"),lastName:g.c().min(2,"Too Short!").max(70,"Too Long!").required("Required"),gender:g.c().ensure().required("Required")}),G={students:g.a().of(B)},V=g.b().shape(Object(O.a)(Object(O.a)({},G),{},{className:g.c().min(2,"Too Short!").max(70,"Too Long!").required("Required")})),Q=function(e){var t=e.push;return Object(n.jsx)("div",{onClick:function(e){t.apply(void 0,Object(h.a)(M(1)))},className:Object(v.a)(["cursor-pointer"]),children:Object(n.jsx)("div",{children:"+ Add Student"})})},U=function(){var e=Object(j.a)(ue),t=Object(l.a)(e,1)[0],c=Object(b.f)(),r=M(1),a=Object(s.useState)(r),i=Object(l.a)(a,1)[0];return Object(n.jsxs)("section",{children:[Object(n.jsx)("section",{children:Object(n.jsxs)("p",{children:["Teacher: ",null===t||void 0===t?void 0:t.displayName]})}),Object(n.jsx)("section",{children:Object(n.jsx)(p.e,{initialValues:{students:i,className:""},onSubmit:function(){var e=Object(f.a)(x.a.mark((function e(n){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:J({students:n.students,className:n.className,teacherId:null===t||void 0===t?void 0:t.uid,history:c});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),validationSchema:V,children:function(e){var t=e.values;return Object(n.jsxs)(p.d,{children:[Object(n.jsx)("label",{htmlFor:"className",children:"Class Name "}),Object(n.jsx)(p.b,{name:"className"}),Object(n.jsx)(p.a,{name:"className",render:function(e){return Object(n.jsx)(z,{text:e})}}),Object(n.jsx)(y,{students:t.students})]})}})})]})},W=c(42),K=["shadow-lg","rounded-md","bg-purple-200","cursor-pointer","transform","transition","hover:scale-110","motion-reduce:transform-none","w-full","h-20","flex","justify-center","items-center"],Y=function(e){var t=e.children,c=e.onClick,s=e.styles,r=void 0===s?[]:s;return Object(n.jsx)("div",{className:Object(v.a)([K].concat(Object(h.a)(r))),onClick:c,children:t})},Z=function(e){var t=e.name,c=(e.teacherId,e.id,e.toPath);return Object(n.jsx)(u.b,{to:c,children:Object(n.jsx)(Y,{children:Object(n.jsx)("h1",{children:t})})})},_=function(e){var t=e.name,c=e.teacherId,s=e.id,r=Object(b.h)().url,a="".concat(r,"class/").concat(s);return Object(n.jsx)(Z,{name:t,teacherId:c,id:s,toPath:a})},H=function(e){var t=e.toPath;return Object(n.jsx)(u.b,{to:t,children:Object(n.jsx)(Y,{children:Object(n.jsx)("p",{children:"Create New Class"})})})},X=function(){var e=Object(b.h)().url;return Object(n.jsx)(H,{toPath:"".concat(e,"class/createClass")})},$=function(e){var t=e.classes,c=e.newClass,s=void 0===c||c;return Object(n.jsxs)(w,{children:[s?Object(n.jsx)(X,{}):null,null===t||void 0===t?void 0:t.map((function(e){return Object(n.jsx)(_,{name:e.name,teacherId:e.teacherId,id:e.id})}))]})},ee=function(e){var t=e.teacherId,c=Object(W.a)(F.a.firestore().collection(k).where("teacherId","==",t),{idField:"id",snapshotListenOptions:{includeMetadataChanges:!0}}),s=Object(l.a)(c,3),a=s[0],i=s[1],o=s[2];return Object(n.jsxs)(r.a.Fragment,{children:[o&&Object(n.jsxs)("strong",{children:["Error: ",JSON.stringify(o)]}),i&&Object(n.jsx)("span",{children:"Loading..."}),Object(n.jsx)($,{classes:null===a||void 0===a?void 0:a.filter((function(e){return!0===e.isActive}))})]})};function te(){var e=Object(j.a)(ue),t=Object(l.a)(e,1)[0];return Object(n.jsxs)("div",{className:"my-5",children:[Object(n.jsx)("h1",{className:"text-3xl py-5",children:"Your Classes"}),Object(n.jsx)(ee,{teacherId:null===t||void 0===t?void 0:t.uid})]})}var ce=function(){var e=Object(f.a)(x.a.mark((function e(t){var c,n,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.students,n=t.classID,e.prev=1,s=be.batch(),c.forEach((function(e){var t=be.collection(L).doc();s.set(t,Object(O.a)({firstName:e.firstName,lastName:e.lastName,gender:e.gender,classID:n,isActive:!0},E()))})),e.next=6,s.commit();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error inserting students",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),ne=g.b().shape(G),se=function(e){var t=e.className,c=e.error,s=void 0===c?void 0:c,a=e.loading,i=void 0!==a&&a,l=e.students,o=e.classID,d=Object(b.f)();return Object(n.jsxs)(r.a.Fragment,{children:[Object(n.jsxs)("div",{className:"flex justify-between my-5",children:[Object(n.jsx)("h1",{className:"text-2xl",children:t}),Object(n.jsx)("div",{className:Object(v.a)("cursor-pointer"),onClick:function(e){window.confirm("Are you sure you want to delete this class? This cannot be undone")&&(P(o),T(d,"/"))},children:Object(n.jsx)("h1",{children:"DELETE CLASS"})})]}),s&&Object(n.jsxs)("strong",{children:["Error: ",JSON.stringify(s)]}),i&&Object(n.jsx)("span",{children:"Loading..."}),Object(n.jsxs)("table",{className:"table-fixed w-full text-left",style:{borderCollapse:"separate",borderSpacing:"0 1em;"},children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{className:"w-1/5",children:"First Name"}),Object(n.jsx)("th",{className:"w-1/5",children:"Last Name"}),Object(n.jsx)("th",{className:"w-1/5",children:"Gender"}),Object(n.jsx)("th",{className:"w-1/5",children:"Report"}),Object(n.jsx)("th",{className:"w-1/5"})]})}),Object(n.jsx)("tbody",{children:null===l||void 0===l?void 0:l.map((function(e){var t=e.firstName,c=e.lastName,s=e.gender,r=e.id;return Object(n.jsxs)("tr",{className:Object(v.a)("bg-red-200"),children:[Object(n.jsx)("td",{children:t}),Object(n.jsx)("td",{children:c}),Object(n.jsx)("td",{children:s}),Object(n.jsx)("td",{className:Object(v.a)("cursor-pointer"),onClick:function(e){T(d,"/student/".concat(r))},children:"Report Link"}),Object(n.jsx)("td",{className:Object(v.a)("cursor-pointer","flex","flex","justify-center items-center"),onClick:function(e){window.confirm("Are you sure you want to delete this student from this class?")&&function(e){be.collection("students").doc(e).set(Object(O.a)({classID:""},D()),{merge:!0})}(r)},children:Object(n.jsx)(C,{})})]},r)}))})]}),Object(n.jsx)(p.e,{initialValues:{students:[]},onSubmit:function(){var e=Object(f.a)(x.a.mark((function e(t,c){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.resetForm,console.log("submitted",t),e.next=4,ce({students:t.students,classID:o});case 4:n();case 5:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),validationSchema:ne,children:function(e){var t=e.values;return Object(n.jsx)(p.d,{children:Object(n.jsx)(y,{students:t.students})})}})]})},re=function(){var e=Object(b.g)().classID,t=Object(W.a)(F.a.firestore().collection(L).where("classID","==",e).where("isActive","==",!0),{idField:"id",snapshotListenOptions:{includeMetadataChanges:!0}}),c=Object(l.a)(t,3),s=c[0],r=c[1],a=c[2],i=Object(W.b)(F.a.firestore().doc("".concat(k,"/").concat(e)),{idField:"id",snapshotListenOptions:{includeMetadataChanges:!0}}),o=Object(l.a)(i,1)[0];return Object(n.jsx)(se,{classID:e,className:null===o||void 0===o?void 0:o.name,error:a,loading:r,students:s})},ae=function(){var e=Object(b.g)().studentID;return Object(n.jsxs)("h1",{children:["viewing student: ",e]})},ie=c(100),le=c.n(ie);function oe(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(le.a,{type:"dark",onClick:function(){var e=new F.a.auth.GoogleAuthProvider;ue.signInWithPopup(e)}})})}var de=c.p+"static/media/logout.9542746e.svg";function je(){return ue.currentUser&&Object(n.jsx)("div",{className:"flex justify-end",children:Object(n.jsxs)("div",{className:"flex cursor-pointer hover:bg-red-500 rounded-full p-1",onClick:function(){return ue.signOut()},children:[Object(n.jsx)("img",{src:de,alt:"logout button",className:"h-full w-10"}),Object(n.jsx)("button",{className:"sign-out",children:"Sign Out"})]})})}d.a.initializeApp({apiKey:"AIzaSyCwxiDrVBzpiEtz5rL9eJt6bZIdymyTQ30",authDomain:"ga-comments.firebaseapp.com",projectId:"ga-comments",storageBucket:"ga-comments.appspot.com",messagingSenderId:"671616870740",appId:"1:671616870740:web:74456365bd146415e180c1",measurementId:"G-MMQSJ4ES92"});var ue=d.a.auth(),be=d.a.firestore();d.a.analytics();var he=function(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(Oe,{})})};function Oe(){return Object(n.jsx)(u.a,{children:Object(n.jsxs)("div",{children:[Object(n.jsx)("ul",{}),Object(n.jsx)("hr",{}),Object(n.jsxs)(b.c,{children:[Object(n.jsx)(b.a,{path:"/class/createClass",children:Object(n.jsx)(U,{})}),Object(n.jsx)(b.a,{path:"/class/:classID",children:Object(n.jsx)(re,{})}),Object(n.jsx)(b.a,{path:"/student/:studentID",children:Object(n.jsx)(ae,{})}),Object(n.jsx)(b.a,{exact:!0,path:"/",children:Object(n.jsx)(te,{})})]})]})})}var me=function(){var e,t=Object(j.a)(ue),c=Object(l.a)(t,1)[0];return Object(n.jsxs)("div",{className:"App mx-8",children:[c?Object(n.jsxs)("div",{className:"flex justify-between items-center",children:[Object(n.jsxs)("div",{className:"flex  items-center",children:[Object(n.jsx)("img",{src:null!==(e=null===c||void 0===c?void 0:c.photoURL)&&void 0!==e?e:"",alt:"Profile Pic",className:"rounded-full h-8 w-8"}),Object(n.jsxs)("h2",{className:"ml-2",children:["Welcome ",null===c||void 0===c?void 0:c.displayName,"!"]})]}),Object(n.jsx)(je,{})]}):null,c?Object(n.jsx)("section",{children:Object(n.jsx)(he,{})}):Object(n.jsx)("section",{className:"flex h-screen justify-center items-center",children:Object(n.jsx)(oe,{})})]})},xe=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,224)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,a=t.getTTFB;c(e),n(e),s(e),r(e),a(e)}))};i.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(me,{})}),document.getElementById("root")),xe()}},[[223,1,2]]]);
//# sourceMappingURL=main.3750bd08.chunk.js.map