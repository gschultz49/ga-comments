(this["webpackJsonpga-comments"]=this["webpackJsonpga-comments"]||[]).push([[0],{108:function(e,t,c){},112:function(e,t,c){},219:function(e,t,c){"use strict";c.r(t);var n=c(2),s=c(3),r=c.n(s),a=c(96),i=c.n(a),l=(c(108),c(11)),o=(c(109),c(45)),d=(c(110),c(111),c(37)),j=c(25),u=c(8),b=(c(112),c(15)),h=c(19),O=c(21),m=c.n(O),x=c(38),f=c(13),v=c(14),p=c(22),g=["grid","grid-cols-3","gap-10"],N=function(e){var t=e.children,c=e.styles;return Object(n.jsx)("div",{className:Object(f.a)([g,c]),children:t})},w=function(e){var t=e.students;return Object(n.jsx)(N,{styles:["grid-cols-4"],children:Object(n.jsx)(v.c,{name:"students",children:function(e){var c=e.remove,s=e.push;return Object(n.jsxs)(r.a.Fragment,{children:[t.map((function(e,t){return e.isEditable&&!0===e.isEditable?Object(n.jsxs)(r.a.Fragment,{children:[Object(n.jsxs)("div",{className:Object(f.a)(["flex","flex-col"]),children:[Object(n.jsx)("label",{htmlFor:"students[".concat(t,"].firstName"),children:"First Name"}),Object(n.jsx)(v.b,{name:"students[".concat(t,"].firstName")}),Object(n.jsx)(v.a,{name:"students[".concat(t,"].firstName"),render:function(e){return Object(n.jsx)(R,{text:e})}})]}),Object(n.jsxs)("div",{className:Object(f.a)(["flex","flex-col"]),children:[Object(n.jsx)("label",{htmlFor:"students[".concat(t,"].lastName"),children:"Last Name"}),Object(n.jsx)(v.b,{name:"students[".concat(t,"].lastName")}),Object(n.jsx)(v.a,{name:"students[".concat(t,"].lastName"),render:function(e){return Object(n.jsx)(R,{text:e})}})]}),Object(n.jsxs)("div",{className:Object(f.a)(["flex","flex-col"]),children:[Object(n.jsx)("label",{htmlFor:"students[".concat(t,"].gender"),children:"Gender"}),Object(n.jsxs)(v.b,{as:"select",name:"students[".concat(t,"].gender"),children:[Object(n.jsx)("option",{value:"",children:"Select..."}),Object(n.jsx)("option",{value:"Male",children:"Male"}),Object(n.jsx)("option",{value:"Female",children:"Female"}),Object(n.jsx)("option",{value:"Other",children:"Other"})]}),Object(n.jsx)(v.a,{name:"students[".concat(t,"].gender"),render:function(e){return Object(n.jsx)(R,{text:e})}})]}),Object(n.jsx)(q,{remove:c,index:t})]}):Object(n.jsxs)(N,{children:[Object(n.jsx)("div",{children:e.firstName}),Object(n.jsx)("div",{children:e.lastName}),Object(n.jsx)("div",{children:e.gender}),Object(n.jsx)(q,{remove:c,index:t})]})})),Object(n.jsx)(G,{push:s}),t.length>0&&Object(n.jsx)("div",{children:Object(n.jsx)("button",{type:"submit",children:"Submit"})})]})}})})},y=c.p+"static/media/remove_button.c88272c3.svg",I=function(){return Object(n.jsx)("img",{src:y,alt:"remove button",className:"cursor-pointer w-7"})},C=c(26),S="classes",F="students",k=function(){return C.a.firestore.Timestamp.now()},E=function(){return{modifiedAt:k()}},L=function(){return Object(h.a)(Object(h.a)({},{createdAt:k()}),E())},A=function(e,t){e.push(t)},D=function(e){!function(e,t,c){je.collection(e).doc(t).set(Object(h.a)({isActive:c},E()),{merge:!0})}(S,e,!1)},T=function(){return{firstName:"",lastName:"",gender:"",isEditable:!0}},P=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T,c=[],n=0;n<e;n++)c.push(t());return c},q=function(e){var t=e.remove,c=e.index;return Object(n.jsx)("div",{onClick:function(e){t(c)},className:Object(f.a)(["flex","justify-center items-center"]),children:Object(n.jsx)("div",{children:Object(n.jsx)(I,{})})})},M=function(){var e=Object(x.a)(m.a.mark((function e(t){var c,n,s,r,a,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.students,n=t.className,s=t.teacherId,r=t.history,e.prev=1,e.next=4,je.collection(S).add(Object(h.a)({name:n,teacherId:s,isActive:!0},L()));case 4:return a=e.sent,e.prev=5,i=je.batch(),c.forEach((function(e){var t=je.collection(F).doc();i.set(t,Object(h.a)({firstName:e.firstName,lastName:e.lastName,gender:e.gender,classID:a.id,isActive:!0},L()))})),e.next=10,i.commit();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.error("Error inserting students",e.t0);case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(1),console.error("Error inserting class",e.t1);case 20:console.log("Insertion Successful!"),A(r,"/");case 22:case"end":return e.stop()}}),e,null,[[1,17],[5,12]])})));return function(t){return e.apply(this,arguments)}}(),R=function(e){var t=e.text;return Object(n.jsx)("i",{className:"text-red-700",children:t})},J=p.b().shape({firstName:p.c().min(2,"Too Short!").max(70,"Too Long!").required("Required"),lastName:p.c().min(2,"Too Short!").max(70,"Too Long!").required("Required"),gender:p.c().ensure().required("Required")}),z={students:p.a().of(J)},B=p.b().shape(Object(h.a)(Object(h.a)({},z),{},{className:p.c().min(2,"Too Short!").max(70,"Too Long!").required("Required")})),G=function(e){var t=e.push;return Object(n.jsx)("div",{onClick:function(e){t.apply(void 0,Object(b.a)(P(1)))},className:Object(f.a)(["cursor-pointer"]),children:Object(n.jsx)("div",{children:"+ Add Student"})})},V=function(){var e=Object(d.a)(de),t=Object(l.a)(e,1)[0],c=Object(u.f)(),r=P(1),a=Object(s.useState)(r),i=Object(l.a)(a,1)[0];return Object(n.jsxs)("section",{children:[Object(n.jsx)("section",{children:Object(n.jsxs)("p",{children:["Teacher: ",null===t||void 0===t?void 0:t.displayName]})}),Object(n.jsx)("section",{children:Object(n.jsx)(v.e,{initialValues:{students:i,className:""},onSubmit:function(){var e=Object(x.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M({students:n.students,className:n.className,teacherId:null===t||void 0===t?void 0:t.uid,history:c});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),validationSchema:B,children:function(e){var t=e.values;return Object(n.jsxs)(v.d,{children:[Object(n.jsx)("label",{htmlFor:"className",children:"Class Name "}),Object(n.jsx)(v.b,{name:"className"}),Object(n.jsx)(v.a,{name:"className",render:function(e){return Object(n.jsx)(R,{text:e})}}),Object(n.jsx)(w,{students:t.students})]})}})})]})},Q=c(44),U=["shadow-lg","rounded-md","bg-purple-200","cursor-pointer","transform","transition","hover:scale-110","motion-reduce:transform-none","w-full","h-20","flex","justify-center","items-center"],W=function(e){var t=e.children,c=e.onClick,s=e.styles,r=void 0===s?[]:s;return Object(n.jsx)("div",{className:Object(f.a)([U].concat(Object(b.a)(r))),onClick:c,children:t})},K=function(e){var t=e.name,c=(e.teacherId,e.id,e.toPath);return Object(n.jsx)(j.b,{to:c,children:Object(n.jsx)(W,{children:Object(n.jsx)("h1",{children:t})})})},Y=function(e){var t=e.name,c=e.teacherId,s=e.id,r=Object(u.h)().url,a="".concat(r,"class/").concat(s);return Object(n.jsx)(K,{name:t,teacherId:c,id:s,toPath:a})},Z=function(e){var t=e.toPath;return Object(n.jsx)(j.b,{to:t,children:Object(n.jsx)(W,{children:Object(n.jsx)("p",{children:"Create New Class"})})})},_=function(){var e=Object(u.h)().url;return Object(n.jsx)(Z,{toPath:"".concat(e,"class/createClass")})},H=function(e){var t=e.classes,c=e.newClass,s=void 0===c||c;return Object(n.jsxs)(N,{children:[s?Object(n.jsx)(_,{}):null,null===t||void 0===t?void 0:t.map((function(e){return Object(n.jsx)(Y,{name:e.name,teacherId:e.teacherId,id:e.id})}))]})},X=function(e){var t=e.teacherId,c=Object(Q.a)(C.a.firestore().collection(S).where("teacherId","==",t),{idField:"id",snapshotListenOptions:{includeMetadataChanges:!0}}),s=Object(l.a)(c,3),a=s[0],i=s[1],o=s[2];return Object(n.jsxs)(r.a.Fragment,{children:[o&&Object(n.jsxs)("strong",{children:["Error: ",JSON.stringify(o)]}),i&&Object(n.jsx)("span",{children:"Loading..."}),Object(n.jsx)(H,{classes:null===a||void 0===a?void 0:a.filter((function(e){return!0===e.isActive}))})]})};function $(){var e=Object(d.a)(de),t=Object(l.a)(e,1)[0];return Object(n.jsxs)("div",{className:"my-5",children:[Object(n.jsx)("h1",{className:"text-3xl py-5",children:"Your Classes"}),Object(n.jsx)(X,{teacherId:null===t||void 0===t?void 0:t.uid})]})}var ee=function(){var e=Object(x.a)(m.a.mark((function e(t){var c,n,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.students,n=t.classID,e.prev=1,s=je.batch(),c.forEach((function(e){var t=je.collection(F).doc();s.set(t,Object(h.a)({firstName:e.firstName,lastName:e.lastName,gender:e.gender,classID:n,isActive:!0},L()))})),e.next=6,s.commit();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error inserting students",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),te=p.b().shape(z),ce=function(e){var t=e.className,c=e.error,s=void 0===c?void 0:c,a=e.loading,i=void 0!==a&&a,l=e.students,o=e.classID,d=Object(u.f)();return Object(n.jsxs)(r.a.Fragment,{children:[Object(n.jsxs)("div",{className:"flex justify-between my-5",children:[Object(n.jsx)("h1",{className:"text-2xl",children:t}),Object(n.jsx)("div",{className:Object(f.a)("cursor-pointer"),onClick:function(e){window.confirm("Are you sure you want to delete this class? This cannot be undone")&&(D(o),A(d,"/"))},children:Object(n.jsx)("h1",{children:"DELETE CLASS"})})]}),s&&Object(n.jsxs)("strong",{children:["Error: ",JSON.stringify(s)]}),i&&Object(n.jsx)("span",{children:"Loading..."}),Object(n.jsxs)("table",{className:"table-fixed w-full text-left",style:{borderCollapse:"separate",borderSpacing:"0 1em;"},children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{className:"w-1/5",children:"First Name"}),Object(n.jsx)("th",{className:"w-1/5",children:"Last Name"}),Object(n.jsx)("th",{className:"w-1/5",children:"Gender"}),Object(n.jsx)("th",{className:"w-1/5",children:"Report"}),Object(n.jsx)("th",{className:"w-1/5"})]})}),Object(n.jsx)("tbody",{children:null===l||void 0===l?void 0:l.map((function(e){var t=e.firstName,c=e.lastName,s=e.gender,r=e.id;return Object(n.jsxs)("tr",{className:Object(f.a)("bg-red-200"),children:[Object(n.jsx)("td",{children:t}),Object(n.jsx)("td",{children:c}),Object(n.jsx)("td",{children:s}),Object(n.jsx)("td",{className:Object(f.a)("cursor-pointer"),onClick:function(e){A(d,"/student/".concat(r))},children:"Report Link"}),Object(n.jsx)("td",{className:Object(f.a)("cursor-pointer","flex","flex","justify-center items-center"),onClick:function(e){window.confirm("Are you sure you want to delete this student from this class?")&&function(e){je.collection("students").doc(e).set(Object(h.a)({classID:""},E()),{merge:!0})}(r)},children:Object(n.jsx)(I,{})})]},r)}))})]}),Object(n.jsx)(v.e,{initialValues:{students:[]},onSubmit:function(){var e=Object(x.a)(m.a.mark((function e(t,c){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.resetForm,console.log("submitted",t),e.next=4,ee({students:t.students,classID:o});case 4:n();case 5:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),validationSchema:te,children:function(e){var t=e.values;return Object(n.jsx)(v.d,{children:Object(n.jsx)(w,{students:t.students})})}})]})},ne=function(){var e=Object(u.g)().classID,t=Object(Q.a)(C.a.firestore().collection(F).where("classID","==",e).where("isActive","==",!0),{idField:"id",snapshotListenOptions:{includeMetadataChanges:!0}}),c=Object(l.a)(t,3),s=c[0],r=c[1],a=c[2],i=Object(Q.b)(C.a.firestore().doc("".concat(S,"/").concat(e)),{idField:"id",snapshotListenOptions:{includeMetadataChanges:!0}}),o=Object(l.a)(i,1)[0];return Object(n.jsx)(ce,{classID:e,className:null===o||void 0===o?void 0:o.name,error:a,loading:r,students:s})},se=function(){var e=Object(u.g)().studentID;return Object(n.jsxs)("h1",{children:["viewing student: ",e]})},re=c(102),ae=c.n(re);function ie(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(ae.a,{type:"dark",onClick:function(){var e=new C.a.auth.GoogleAuthProvider;de.signInWithPopup(e)}})})}var le=c.p+"static/media/logout.9542746e.svg";function oe(){return de.currentUser&&Object(n.jsx)("div",{className:"flex justify-end",children:Object(n.jsxs)("div",{className:"flex cursor-pointer hover:bg-red-500 rounded-full p-1",onClick:function(){return de.signOut()},children:[Object(n.jsx)("img",{src:le,alt:"logout button",className:"h-full w-10"}),Object(n.jsx)("button",{className:"sign-out",children:"Sign Out"})]})})}o.a.initializeApp({apiKey:"AIzaSyCwxiDrVBzpiEtz5rL9eJt6bZIdymyTQ30",authDomain:"ga-comments.firebaseapp.com",projectId:"ga-comments",storageBucket:"ga-comments.appspot.com",messagingSenderId:"671616870740",appId:"1:671616870740:web:74456365bd146415e180c1",measurementId:"G-MMQSJ4ES92"});var de=o.a.auth(),je=o.a.firestore();o.a.analytics();"localhost"===window.location.hostname&&je.useEmulator("localhost",8080);var ue=function(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(be,{})})};function be(){return Object(n.jsx)(j.a,{children:Object(n.jsxs)("div",{children:[Object(n.jsx)("ul",{}),Object(n.jsx)("hr",{}),Object(n.jsxs)(u.c,{children:[Object(n.jsx)(u.a,{path:"/class/createClass",children:Object(n.jsx)(V,{})}),Object(n.jsx)(u.a,{path:"/class/:classID",children:Object(n.jsx)(ne,{})}),Object(n.jsx)(u.a,{path:"/student/:studentID",children:Object(n.jsx)(se,{})}),Object(n.jsx)(u.a,{path:"/",children:Object(n.jsx)($,{})})]})]})})}var he=function(){var e,t=Object(d.a)(de),c=Object(l.a)(t,1)[0];return Object(n.jsxs)("div",{className:"App mx-8",children:[c?Object(n.jsxs)("div",{className:"flex justify-between items-center",children:[Object(n.jsxs)("div",{className:"flex  items-center",children:[Object(n.jsx)("img",{src:null!==(e=null===c||void 0===c?void 0:c.photoURL)&&void 0!==e?e:"",alt:"Profile Pic",className:"rounded-full h-8 w-8"}),Object(n.jsxs)("h2",{className:"ml-2",children:["Welcome ",null===c||void 0===c?void 0:c.displayName,"!"]})]}),Object(n.jsx)(oe,{})]}):null,c?Object(n.jsx)("section",{children:Object(n.jsx)(ue,{})}):Object(n.jsx)("section",{className:"flex h-screen justify-center items-center",children:Object(n.jsx)(ie,{})})]})},Oe=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,220)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,a=t.getTTFB;c(e),n(e),s(e),r(e),a(e)}))};i.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(he,{})}),document.getElementById("root")),Oe()}},[[219,1,2]]]);
//# sourceMappingURL=main.e332afe4.chunk.js.map